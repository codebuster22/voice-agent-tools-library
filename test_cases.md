# API Test Cases for Automotive Voice Agent

## Overview
This document provides detailed test cases for all 13 API endpoints in the automotive voice agent system using REAL SERVICE INTEGRATION. Each test case includes test data, expected outcomes, and validation criteria for actual API responses.

## Real Service Testing Considerations

### Google Calendar API
- **Authentication**: Uses service account with domain-wide delegation
- **Test Isolation**: All test events use "TEST_" prefix for easy identification
- **Cleanup**: Every created test event must be deleted after test completion
- **Rate Limits**: Tests should include delays to avoid hitting API rate limits
- **Dynamic Data**: Test assertions must handle dynamic IDs and timestamps

### Test Environment Setup
```python
@pytest.fixture(autouse=True)
async def cleanup_test_calendar(request):
    """Ensure test calendar is clean before and after tests."""
    created_items = []
    
    yield created_items
    
    # Cleanup any test events
    for item_id, calendar_id in created_items:
        try:
            await delete_event(service, item_id, calendar_id)
        except:
            pass  # Event may already be deleted
```

### Real API Validation Strategy
- Don't assert on exact IDs (they're generated by Google)
- Validate structure and required fields exist
- Check that operations actually affect the calendar
- Verify error responses match Google's actual error format

## Test Case Structure

Each test case follows this format:
- **Test ID**: Unique identifier
- **Description**: What is being tested
- **Method & Endpoint**: HTTP method and URL
- **Request Data**: Input payload
- **Expected Status**: HTTP status code
- **Expected Response**: Response structure and data
- **Validation**: Specific assertions to make

---

# Health Check Tests

## TC-HEALTH-001: Successful Health Check
- **Description**: Verify health endpoint returns system status
- **Method & Endpoint**: `GET /api/v1/health`
- **Request Data**: None
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "status": "healthy",
    "services": {
      "database": "connected",
      "google_calendar": "available",
      "vapi": "available"
    },
    "tools_available": 13,
    "timestamp": "2025-01-15T10:30:00"
  }
  ```
- **Validation**:
  - Status is "healthy"
  - All services show positive status
  - Tools count equals 13
  - Timestamp is valid ISO format

---

# Calendar Endpoint Tests

## List Calendars Tests

### TC-CAL-001: List Calendars - Default Parameters (REAL API)
- **Description**: List actual calendars from Google Calendar API
- **Method & Endpoint**: `POST /api/v1/calendar/list-calendars`
- **Request Data**:
  ```json
  {
    "max_results": 10,
    "show_hidden": false,
    "query_strings": [],
    "query_string_to_include": null
  }
  ```
- **Expected Status**: 200
- **Expected Response Structure**:
  ```json
  {
    "success": true,
    "data": {
      "items": [
        {
          "id": "<actual_calendar_id>",
          "summary": "<actual_calendar_name>",
          "accessRole": "<actual_access_role>"
        }
      ]
    },
    "tool_name": "list_calendars",
    "execution_time_ms": <actual_time>
  }
  ```
- **Validation**:
  - Success is true
  - Data contains items array with actual calendars
  - At least one calendar exists (primary)
  - Tool name equals "list_calendars"
  - Execution time is positive number

### TC-CAL-002: List Calendars - With Query Filter
- **Description**: List calendars with search query
- **Method & Endpoint**: `POST /api/v1/calendar/list-calendars`
- **Request Data**:
  ```json
  {
    "max_results": 5,
    "show_hidden": true,
    "query_strings": ["work", "meeting"],
    "query_string_to_include": "work"
  }
  ```
- **Expected Status**: 200
- **Expected Response**: Standard ToolResponse with filtered results
- **Validation**:
  - Results contain query-matching calendars
  - Hidden calendars included if any exist

### TC-CAL-003: List Calendars - Invalid Permission (REAL API)
- **Description**: Test actual API error when accessing unauthorized calendar
- **Method & Endpoint**: `POST /api/v1/calendar/list-calendars`
- **Request Data**: Request with calendar requiring special permissions
- **Expected Status**: 500 (or appropriate error from real API)
- **Expected Response**: Actual Google API error response
- **Validation**:
  - Error status code returned
  - Error message from Google Calendar API

## Get Availability Tests

### TC-CAL-004: Get Availability - Valid Time Range (REAL API)
- **Description**: Get actual availability from real calendar data
- **Method & Endpoint**: `POST /api/v1/calendar/get-availability`
- **Test Setup**: Create test events in calendar first
- **Request Data**:
  ```json
  {
    "calendar_ids": ["primary"],
    "start_time": "<future_date>T09:00:00-08:00",
    "end_time": "<future_date>T17:00:00-08:00",
    "working_hours_start": "09:00",
    "working_hours_end": "17:00",
    "working_days": [1, 2, 3, 4, 5],
    "time_zone": "America/Los_Angeles"
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with actual availability slots
- **Validation**:
  - Success is true
  - Data contains real available time slots
  - Slots exclude times with existing events
  - Times are within working hours

### TC-CAL-005: Get Availability - Invalid Date Format
- **Description**: Test with malformed date string
- **Method & Endpoint**: `POST /api/v1/calendar/get-availability`
- **Request Data**:
  ```json
  {
    "calendar_ids": ["primary"],
    "start_time": "invalid-date",
    "end_time": "2025-01-20T17:00:00-08:00"
  }
  ```
- **Expected Status**: 400
- **Expected Response**:
  ```json
  {
    "detail": "Invalid datetime format"
  }
  ```
- **Validation**:
  - Status code is 400
  - Error message mentions date format

### TC-CAL-006: Get Availability - Start After End Time
- **Description**: Test with start time after end time
- **Method & Endpoint**: `POST /api/v1/calendar/get-availability`
- **Request Data**:
  ```json
  {
    "calendar_ids": ["primary"],
    "start_time": "2025-01-20T17:00:00-08:00",
    "end_time": "2025-01-20T09:00:00-08:00"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Error about invalid time range
- **Validation**:
  - Status code is 400
  - Error mentions time range validation

## Get Events Tests

### TC-CAL-007: Get Events - By Calendar IDs (REAL API)
- **Description**: Retrieve actual events from real calendars
- **Method & Endpoint**: `POST /api/v1/calendar/get-events`
- **Test Setup**: May need to create test events first
- **Request Data**:
  ```json
  {
    "calendar_ids": ["primary"],
    "time_min": "<current_date>T00:00:00-08:00",
    "time_max": "<future_date>T23:59:59-08:00",
    "max_results": 50,
    "order_by": "startTime",
    "show_deleted": false,
    "time_zone": "America/Los_Angeles"
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with actual events
- **Validation**:
  - Success is true
  - Data contains real events from calendar
  - Events are properly ordered by start time
  - Each event has valid structure

### TC-CAL-008: Get Events - By Event ID (REAL API)
- **Description**: Retrieve specific event from real calendar
- **Method & Endpoint**: `POST /api/v1/calendar/get-events`
- **Test Setup**: Create a test event first, get its ID
- **Request Data**:
  ```json
  {
    "event_id": "<actual_event_id>",
    "calendar_ids": ["primary"]
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with the actual event
- **Validation**:
  - Success is true
  - Data contains the requested event
  - Event ID matches the requested ID

### TC-CAL-009: Get Events - With Search Query
- **Description**: Search events by text query
- **Method & Endpoint**: `POST /api/v1/calendar/get-events`
- **Request Data**:
  ```json
  {
    "calendar_ids": ["primary"],
    "query": "meeting with client",
    "max_results": 10
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with matching events
- **Validation**:
  - Success is true
  - Events contain query terms in summary/description

## Create Event Tests

### TC-CAL-010: Create Event - Valid Appointment (REAL API)
- **Description**: Create actual appointment in real calendar
- **Method & Endpoint**: `POST /api/v1/calendar/create-event`
- **Test Cleanup**: Delete created event after test
- **Request Data**:
  ```json
  {
    "calendar_id": "primary",
    "summary": "TEST_APPOINTMENT_DELETE_ME",
    "start_time": "<future_datetime>",
    "customer_email": "test.customer@email.com",
    "description": "Test appointment - safe to delete",
    "location": "Test Location"
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with actual created event
- **Validation**:
  - Success is true
  - Data contains event with real Google event ID
  - Event actually exists in calendar
  - Attendee includes customer email

### TC-CAL-011: Create Event - Missing Required Fields
- **Description**: Test validation with missing summary
- **Method & Endpoint**: `POST /api/v1/calendar/create-event`
- **Request Data**:
  ```json
  {
    "calendar_id": "primary",
    "start_time": "2025-01-25T14:00:00-08:00",
    "customer_email": "john.doe@email.com"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Validation error for missing summary
- **Validation**:
  - Status code is 400
  - Error mentions required field validation

### TC-CAL-012: Create Event - Invalid Email Format
- **Description**: Test with malformed customer email
- **Method & Endpoint**: `POST /api/v1/calendar/create-event`
- **Request Data**:
  ```json
  {
    "calendar_id": "primary",
    "summary": "Customer Meeting",
    "start_time": "2025-01-25T14:00:00-08:00",
    "customer_email": "invalid-email-format"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Email validation error
- **Validation**:
  - Status code is 400
  - Error mentions email format

## Update Event Tests

### TC-CAL-013: Update Event - Basic Fields (REAL API)
- **Description**: Update actual event in real calendar
- **Method & Endpoint**: `POST /api/v1/calendar/update-event`
- **Test Setup**: Create a test event first
- **Request Data**:
  ```json
  {
    "event_id": "<actual_event_id>",
    "calendar_id": "primary",
    "summary": "UPDATED_TEST_EVENT",
    "description": "Updated test description",
    "send_notifications": false
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with actual updated event
- **Validation**:
  - Success is true
  - Event actually updated in calendar
  - New values reflected in response

### TC-CAL-014: Update Event - Add Attendees
- **Description**: Add new attendees to existing event
- **Method & Endpoint**: `POST /api/v1/calendar/update-event`
- **Request Data**:
  ```json
  {
    "event_id": "event123456789",
    "calendar_id": "primary",
    "attendees": ["new.attendee@email.com"],
    "attendee_action": "add",
    "send_notifications": true
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with updated attendees
- **Validation**:
  - Success is true
  - New attendee added to list
  - Notifications sent to new attendee

### TC-CAL-015: Update Event - Missing Event ID
- **Description**: Test validation with missing event ID
- **Method & Endpoint**: `POST /api/v1/calendar/update-event`
- **Request Data**:
  ```json
  {
    "calendar_id": "primary",
    "summary": "Updated Title"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Validation error for missing event ID
- **Validation**:
  - Status code is 400
  - Error mentions required event_id field

### TC-CAL-016: Update Event - Invalid Color ID
- **Description**: Test with invalid color ID value
- **Method & Endpoint**: `POST /api/v1/calendar/update-event`
- **Request Data**:
  ```json
  {
    "event_id": "event123456789",
    "calendar_id": "primary",
    "color_id": "99"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Color ID validation error
- **Validation**:
  - Status code is 400
  - Error mentions invalid color ID

## Delete Event Tests

### TC-CAL-017: Delete Event - Standard Delete (REAL API)
- **Description**: Delete actual event from real calendar
- **Method & Endpoint**: `POST /api/v1/calendar/delete-event`
- **Test Setup**: Create a test event first
- **Request Data**:
  ```json
  {
    "event_id": "<actual_event_id>",
    "calendar_id": "primary",
    "send_notifications": false,
    "force_delete": false
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse confirming actual deletion
- **Validation**:
  - Success is true
  - Event actually removed from calendar
  - Subsequent GET returns 404

### TC-CAL-018: Delete Event - Force Delete
- **Description**: Force delete event without notifications
- **Method & Endpoint**: `POST /api/v1/calendar/delete-event`
- **Request Data**:
  ```json
  {
    "event_id": "event123456789",
    "calendar_id": "primary",
    "send_notifications": false,
    "force_delete": true
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse confirming force deletion
- **Validation**:
  - Success is true
  - Event deleted without notifications

### TC-CAL-019: Delete Event - Missing Event ID
- **Description**: Test validation with missing event ID
- **Method & Endpoint**: `POST /api/v1/calendar/delete-event`
- **Request Data**:
  ```json
  {
    "calendar_id": "primary",
    "send_notifications": true
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Validation error for missing event ID
- **Validation**:
  - Status code is 400
  - Error mentions required event_id field

---

# Knowledge Base Endpoint Tests

## TC-KB-001: Fetch Latest KB - Success
- **Description**: Fetch latest knowledge base from GitHub
- **Method & Endpoint**: `POST /api/v1/knowledge-base/fetch-latest`
- **Request Data**:
  ```json
  {}
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "files_updated": 5,
      "last_updated": "2025-01-15T10:30:00Z",
      "status": "success"
    },
    "tool_name": "fetch_latest_kb",
    "execution_time_ms": 2500.0
  }
  ```
- **Validation**:
  - Success is true
  - Data contains update information
  - Execution time reflects network operation

## TC-KB-002: Fetch Latest KB - Network Error
- **Description**: Test behavior when GitHub is unreachable
- **Method & Endpoint**: `POST /api/v1/knowledge-base/fetch-latest`
- **Request Data**: `{}`
- **Expected Status**: 500
- **Expected Response**: Network connection error
- **Validation**:
  - Status code is 500
  - Error message indicates network issue

## TC-KB-003: Sync Knowledge Base - Success
- **Description**: Sync knowledge base to VAPI
- **Method & Endpoint**: `POST /api/v1/knowledge-base/sync`
- **Request Data**:
  ```json
  {}
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "documents_synced": 12,
      "sync_id": "sync_12345",
      "status": "completed"
    },
    "tool_name": "sync_knowledge_base",
    "execution_time_ms": 3200.0
  }
  ```
- **Validation**:
  - Success is true
  - Data contains sync statistics
  - Sync ID is provided

## TC-KB-004: Sync Knowledge Base - Missing Credentials
- **Description**: Test behavior when VAPI credentials are missing
- **Method & Endpoint**: `POST /api/v1/knowledge-base/sync`
- **Request Data**: `{}`
- **Expected Status**: 500
- **Expected Response**: Credentials error
- **Validation**:
  - Status code is 500
  - Error mentions missing credentials

---

# Inventory Endpoint Tests

## Check Inventory Tests

### TC-INV-001: Check Inventory - All Filters
- **Description**: Check inventory with all filter parameters
- **Method & Endpoint**: `POST /api/v1/inventory/check-inventory`
- **Request Data**:
  ```json
  {
    "category": "SUV",
    "model_name": "Explorer",
    "min_price": 30000,
    "max_price": 50000,
    "features": ["leather_seats", "sunroof"],
    "status": "available"
  }
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "items": [
        {
          "vehicle_id": "V12345",
          "model": "Explorer XLT",
          "price": 42000,
          "features": ["leather_seats", "sunroof", "navigation"],
          "status": "available"
        }
      ]
    },
    "tool_name": "check_inventory",
    "execution_time_ms": 250.0
  }
  ```
- **Validation**:
  - Success is true
  - Results match all filter criteria
  - Data wrapped in items array

### TC-INV-002: Check Inventory - Partial Filters
- **Description**: Check inventory with only some filters
- **Method & Endpoint**: `POST /api/v1/inventory/check-inventory`
- **Request Data**:
  ```json
  {
    "category": "sedan",
    "max_price": 35000
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with matching vehicles
- **Validation**:
  - Success is true
  - Results filtered by category and max price
  - Other filters ignored gracefully

### TC-INV-003: Check Inventory - Invalid Category
- **Description**: Test with unsupported vehicle category
- **Method & Endpoint**: `POST /api/v1/inventory/check-inventory`
- **Request Data**:
  ```json
  {
    "category": "invalid_category",
    "status": "available"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Category validation error
- **Validation**:
  - Status code is 400
  - Error mentions invalid category

### TC-INV-004: Check Inventory - Invalid Price Range
- **Description**: Test with min_price > max_price
- **Method & Endpoint**: `POST /api/v1/inventory/check-inventory`
- **Request Data**:
  ```json
  {
    "min_price": 50000,
    "max_price": 30000
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Price range validation error
- **Validation**:
  - Status code is 400
  - Error mentions invalid price range

## Get Delivery Dates Tests

### TC-INV-005: Get Delivery Dates - With Vehicle ID
- **Description**: Get delivery dates for specific vehicle
- **Method & Endpoint**: `POST /api/v1/inventory/get-delivery-dates`
- **Request Data**:
  ```json
  {
    "vehicle_id": "V12345",
    "features": ["premium_audio", "leather_seats"]
  }
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "vehicle_id": "V12345",
      "estimated_delivery": "2025-03-15",
      "delivery_range": "2025-03-10 to 2025-03-20",
      "factors": ["feature_availability", "shipping_time"]
    },
    "tool_name": "get_expected_delivery_dates",
    "execution_time_ms": 180.0
  }
  ```
- **Validation**:
  - Success is true
  - Delivery dates are realistic
  - Factors affecting delivery listed

### TC-INV-006: Get Delivery Dates - General Info
- **Description**: Get general delivery information when no vehicle ID provided
- **Method & Endpoint**: `POST /api/v1/inventory/get-delivery-dates`
- **Request Data**:
  ```json
  {
    "features": ["navigation"]
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with general delivery info
- **Validation**:
  - Success is true
  - General delivery timeframes provided
  - Feature-specific information included

## Get Prices Tests

### TC-INV-007: Get Prices - Specific Vehicle
- **Description**: Get pricing for specific vehicle
- **Method & Endpoint**: `POST /api/v1/inventory/get-prices`
- **Request Data**:
  ```json
  {
    "query_type": "vehicle",
    "vehicle_id": "V12345",
    "features": ["premium_package"]
  }
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "base_price": 35000,
      "features_cost": 5000,
      "total_price": 40000,
      "financing_available": true,
      "incentives": ["military_discount", "trade_in_bonus"]
    },
    "tool_name": "get_prices",
    "execution_time_ms": 120.0
  }
  ```
- **Validation**:
  - Success is true
  - Pricing breakdown provided
  - Available incentives listed

### TC-INV-008: Get Prices - Price Overview
- **Description**: Get general pricing information
- **Method & Endpoint**: `POST /api/v1/inventory/get-prices`
- **Request Data**:
  ```json
  {
    "query_type": "overview"
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with price ranges and categories
- **Validation**:
  - Success is true
  - Price ranges for different categories
  - Financing options mentioned

### TC-INV-009: Get Prices - Invalid Query Type
- **Description**: Test with unsupported query type
- **Method & Endpoint**: `POST /api/v1/inventory/get-prices`
- **Request Data**:
  ```json
  {
    "query_type": "invalid_type",
    "vehicle_id": "V12345"
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Query type validation error
- **Validation**:
  - Status code is 400
  - Error mentions invalid query type

## Get Similar Vehicles Tests

### TC-INV-010: Get Similar Vehicles - With Reference
- **Description**: Find vehicles similar to reference vehicle
- **Method & Endpoint**: `POST /api/v1/inventory/get-similar-vehicles`
- **Request Data**:
  ```json
  {
    "reference_vehicle_id": "V12345",
    "max_results": 5,
    "price_tolerance_percent": 10,
    "include_unavailable": false
  }
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "items": [
        {
          "vehicle_id": "V12346",
          "similarity_score": 0.85,
          "price_difference": 2000,
          "similar_features": ["engine_type", "transmission", "trim_level"]
        }
      ]
    },
    "tool_name": "get_similar_vehicles",
    "execution_time_ms": 300.0
  }
  ```
- **Validation**:
  - Success is true
  - Results sorted by similarity
  - Price differences within tolerance

### TC-INV-011: Get Similar Vehicles - Include Unavailable
- **Description**: Include unavailable vehicles in similarity search
- **Method & Endpoint**: `POST /api/v1/inventory/get-similar-vehicles`
- **Request Data**:
  ```json
  {
    "reference_vehicle_id": "V12345",
    "max_results": 10,
    "include_unavailable": true
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse including sold/reserved vehicles
- **Validation**:
  - Success is true
  - Unavailable vehicles included with status

### TC-INV-012: Get Similar Vehicles - Invalid Reference
- **Description**: Test with non-existent reference vehicle
- **Method & Endpoint**: `POST /api/v1/inventory/get-similar-vehicles`
- **Request Data**:
  ```json
  {
    "reference_vehicle_id": "INVALID123",
    "max_results": 5
  }
  ```
- **Expected Status**: 400
- **Expected Response**: Reference vehicle not found error
- **Validation**:
  - Status code is 400
  - Error mentions invalid reference vehicle

## Get Vehicle Details Tests

### TC-INV-013: Get Vehicle Details - With Vehicle ID
- **Description**: Get detailed information for specific vehicle
- **Method & Endpoint**: `POST /api/v1/inventory/get-vehicle-details`
- **Request Data**:
  ```json
  {
    "vehicle_id": "V12345",
    "include_pricing": true,
    "include_similar": true
  }
  ```
- **Expected Status**: 200
- **Expected Response**:
  ```json
  {
    "success": true,
    "data": {
      "vehicle_id": "V12345",
      "make": "Ford",
      "model": "Explorer",
      "year": 2025,
      "features": ["leather_seats", "navigation", "sunroof"],
      "pricing": {
        "base_price": 40000,
        "total_price": 42000
      },
      "similar_vehicles": ["V12346", "V12347"]
    },
    "tool_name": "get_vehicle_details",
    "execution_time_ms": 200.0
  }
  ```
- **Validation**:
  - Success is true
  - Complete vehicle information provided
  - Pricing and similar vehicles included

### TC-INV-014: Get Vehicle Details - With Inventory ID
- **Description**: Get vehicle details using inventory ID
- **Method & Endpoint**: `POST /api/v1/inventory/get-vehicle-details`
- **Request Data**:
  ```json
  {
    "inventory_id": "INV789",
    "include_pricing": false,
    "include_similar": false
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with basic vehicle details
- **Validation**:
  - Success is true
  - Vehicle details without pricing/similar
  - Inventory-specific information included

### TC-INV-015: Get Vehicle Details - No IDs Provided
- **Description**: Get helpful information when no IDs provided
- **Method & Endpoint**: `POST /api/v1/inventory/get-vehicle-details`
- **Request Data**:
  ```json
  {
    "include_pricing": true,
    "include_similar": false
  }
  ```
- **Expected Status**: 200
- **Expected Response**: ToolResponse with general vehicle information guide
- **Validation**:
  - Success is true
  - Helpful guidance provided
  - Information about how to search vehicles

---

# Cross-Cutting Test Cases

## Performance Tests

### TC-PERF-001: Response Time Benchmarks
- **Description**: Verify all endpoints meet response time requirements
- **Test Method**: Execute each endpoint and measure response time
- **Acceptance Criteria**:
  - Health check: < 100ms
  - Simple operations: < 500ms
  - Complex operations: < 1000ms
- **Validation**: All endpoints within time limits

### TC-PERF-002: Concurrent Request Handling
- **Description**: Test system behavior under concurrent load
- **Test Method**: Send 50 concurrent requests to different endpoints
- **Acceptance Criteria**: All requests complete successfully
- **Validation**:
  - No request failures
  - Response times remain reasonable
  - No resource conflicts

## Error Handling Tests

### TC-ERR-001: Malformed JSON Request
- **Description**: Test behavior with invalid JSON in request body
- **Method & Endpoint**: Any POST endpoint
- **Request Data**: `{"invalid": json,}`
- **Expected Status**: 400
- **Expected Response**: JSON parsing error
- **Validation**:
  - Status code is 400
  - Error mentions JSON parsing

### TC-ERR-002: Missing Content-Type Header
- **Description**: Test requests without proper content type
- **Method & Endpoint**: Any POST endpoint
- **Request Headers**: Missing `Content-Type: application/json`
- **Expected Status**: 400
- **Expected Response**: Content type error
- **Validation**:
  - Status code is 400
  - Error mentions content type

### TC-ERR-003: Real API Rate Limit
- **Description**: Test behavior when hitting Google API rate limits
- **Method & Endpoint**: Calendar endpoints with rapid requests
- **Test Method**: Send multiple rapid requests to real API
- **Expected Status**: 429 or 500
- **Expected Response**: Rate limit error from Google
- **Validation**:
  - Appropriate error status code
  - Error message indicates rate limiting

## Security Tests

### TC-SEC-001: Input Sanitization
- **Description**: Test resistance to injection attacks
- **Method & Endpoint**: Any endpoint accepting string input
- **Request Data**: Includes SQL injection, XSS patterns
- **Expected Behavior**: Input sanitized or rejected
- **Validation**: No execution of malicious code

### TC-SEC-002: Large Request Payload
- **Description**: Test handling of oversized requests
- **Method & Endpoint**: Any POST endpoint
- **Request Data**: Very large JSON payload (>10MB)
- **Expected Status**: 413 or 400
- **Expected Response**: Payload size error
- **Validation**: Request rejected appropriately

---

# Test Data Sets for Real Service Testing

## Calendar Test Data (Real API)

### Valid Event Data for Creation
```json
{
  "summary": "TEST_EVENT_<timestamp>",
  "start_time": "<future_datetime>",
  "customer_email": "test.user@example.com",
  "description": "Test event - safe to delete",
  "location": "Test Location"
}
```

### Test Event Cleanup Strategy
```python
# Track all created test events
test_events_created = []

# After each test, cleanup
for event_id, calendar_id in test_events_created:
    delete_event(service, event_id, calendar_id)
```

### Invalid Event Data (Real API will reject)
```json
{
  "summary": "",
  "start_time": "invalid-date",
  "customer_email": "not-an-email",
  "description": null
}
```

## Inventory Test Data

### Valid Vehicle Data
```json
{
  "vehicle_id": "V12345",
  "make": "Ford",
  "model": "Explorer",
  "year": 2025,
  "category": "SUV",
  "price": 42000,
  "status": "available",
  "features": ["leather_seats", "navigation", "sunroof"]
}
```

### Edge Case Data
```json
{
  "min_price": 0,
  "max_price": 999999,
  "features": [],
  "category": ""
}
```

## Error Scenarios Data

### Common Error Patterns
- Empty required fields
- Null values where not allowed  
- Wrong data types (string for number, etc.)
- Invalid enum values
- Malformed dates and emails
- Negative numbers where positive required
- Extremely long strings
- Special characters and Unicode
- SQL injection attempts
- XSS payloads